<!doctype html> 
<html lang="el"> 
<head> 
  <meta charset="utf-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1" /> 
  <title>Tag‑It‑AR (Desktop) — &lt;i&gt;Hello World!&lt;/i&gt;</title> 
 

  <!-- A-Frame + MindAR (A-Frame integration, via CDN) --> 
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script> 
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script> 
 

  <style> 
    :root{ 
      --bg:#0b0f14; 
      --panel: rgba(0,0,0,.48); 
      --border: rgba(255,255,255,.18); 
      --dash: rgba(255,255,255,.24); 
      --accent: #2dd4bf; 
      --helloBg:#ffd400; 
      --helloFg:#111; 
    } 
 

    body{ 
      margin:0; 
      overflow:hidden; 
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; 
      background: var(--bg); 
    } 
 

    /* Overlay UI πάνω από την κάμερα */ 
    #ui{ 
      position: fixed; 
      inset: 0; 
      z-index: 10; 
      pointer-events: none; 
      display: grid; 
      grid-template-rows: auto 1fr auto; 
      gap: 12px; 
      padding: 14px; 
      color: #fff; 
      text-shadow: 0 2px 10px rgba(0,0,0,.6); 
    } 
 

    #topbar{ 
      display:flex; 
      flex-wrap:wrap; 
      align-items:center; 
      justify-content: space-between; 
      gap: 10px; 
    } 
 

    .pill{ 
      background: rgba(0,0,0,.58); 
      border: 1px solid var(--border); 
      border-radius: 999px; 
      padding: 8px 12px; 
      font-size: 14px; 
      line-height: 1.2; 
      backdrop-filter: blur(6px); 
    } 
 

    #startBtn{ 
      pointer-events: auto; /* το μόνο clickable στοιχείο */ 
      cursor: pointer; 
      background: var(--accent); 
      color: #06201b; 
      border: 0; 
      border-radius: 999px; 
      padding: 10px 14px; 
      font-weight: 900; 
      box-shadow: 0 14px 34px rgba(45,212,191,.25); 
    } 
    #startBtn:disabled{ 
      opacity: .65; 
      cursor: not-allowed; 
    } 
 

    /* Κεντρική desktop διάταξη: left | center | right */ 
    #main{ 
      height: 100%; 
      max-width: 1200px; 
      margin: 0 auto; 
      display: grid; 
      grid-template-columns: 1fr auto 1fr; 
      gap: 14px; 
      align-items: center; 
      padding: 6px; 
    } 
 

    .panel{ 
      background: var(--panel); 
      border: 1px dashed var(--dash); 
      border-radius: 18px; 
      padding: 18px 14px; 
      min-height: 190px; 
      display: grid; 
      align-content: center; 
      gap: 10px; 
      min-width: 0; 
    } 
    .panel .label{ 
      font-size: 13px; 
      opacity: .92; 
    } 
    .panel .expect{ 
      font-size: 24px; 
      font-weight: 950; 
      letter-spacing: .3px; 
    } 
    .panel .state{ 
      font-size: 14px; 
      opacity: .96; 
    } 
 

    /* High-contrast box στο κέντρο */ 
    #centerBox{ 
      background: var(--helloBg); 
      color: var(--helloFg); 
      border: 4px solid #111; 
      border-radius: 20px; 
      padding: 18px 20px; 
      text-align: center; 
      box-shadow: 0 20px 55px rgba(0,0,0,.45); 
      min-width: 440px; 
      max-width: 560px; 
    } 
    #hello{ 
      margin: 0; 
      font-size: 52px; 
      font-weight: 950; 
      line-height: 1.05; 
    } 
    #hello.italic{ font-style: italic; } 
 

    #codeTitle{ 
      margin-top: 12px; 
      font-size: 12px; 
      font-weight: 800; 
      opacity: .95; 
      text-align: left; 
    } 
 

    #codePreview{ 
      margin-top: 6px; 
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; 
      font-size: 14px; 
      background: rgba(17,17,17,.92); 
      color: #eaeaea; 
      padding: 10px 12px; 
      border-radius: 12px; 
      border: 1px solid rgba(255,255,255,.14); 
      text-align: left; 
      white-space: pre; 
      overflow: auto; 
    } 
 

    #footer{ 
      display:flex; 
      justify-content:center; 
    } 
    .hint{ 
      max-width: 1200px; 
      width: 100%; 
      background: rgba(0,0,0,.58); 
      border: 1px solid var(--border); 
      border-radius: 16px; 
      padding: 10px 12px; 
      font-size: 14px; 
      text-align:center; 
      backdrop-filter: blur(6px); 
    } 
 

    /* fallback για μικρά παράθυρα desktop */ 
    @media (max-width: 980px){ 
      #main{ grid-template-columns: 1fr; } 
      #centerBox{ min-width: 0; width: 100%; max-width: 100%; } 
    } 
  </style> 
 

  <script> 
    /** 
     * Desktop rule: 
     * - Opening card <i> must appear on the RIGHT side of the camera view 
     * - Closing card </i> must appear on the LEFT side of the camera view 
     * 
     * We start AR with a user click (Start Camera) using arSystem.start(), 
     * which is the recommended pattern shown in MindAR event-handling example. [3](https://hiukim.github.io/mind-ar-js-doc/examples/events-handling/) 
     */ 
    AFRAME.registerComponent("desktop-open-close-rule", { 
      init: function () { 
        this.openVisible = false; 
        this.closeVisible = false; 
        this.deadZone = 0.12; // μικρή “νεκρή ζώνη” κοντά στο κέντρο 
 

        this.helloEl = document.getElementById("hello"); 
        this.codeEl = document.getElementById("codePreview"); 
        this.statusEl = document.getElementById("statusPill"); 
 

        this.leftStateEl = document.getElementById("leftState"); 
        this.rightStateEl = document.getElementById("rightState"); 
 

        this.startBtn = document.getElementById("startBtn"); 
 

        const sceneEl = document.querySelector("a-scene"); 
        this.arSystem = null; 
 

        // MindAR system available once scene is loaded 
        sceneEl.addEventListener("loaded", () => { 
          this.arSystem = sceneEl.systems["mindar-image-system"]; 
          this.startBtn.disabled = false; 
        }); 
 

        // Targets 
        this.openTargetEl = document.getElementById("openTarget"); 
        this.closeTargetEl = document.getElementById("closeTarget"); 
 

        // Events: targetFound / targetLost (MindAR docs example) [3](https://hiukim.github.io/mind-ar-js-doc/examples/events-handling/) 
        this.openTargetEl.addEventListener("targetFound", () => { this.openVisible = true; }); 
        this.openTargetEl.addEventListener("targetLost",  () => { this.openVisible = false; }); 
 

        this.closeTargetEl.addEventListener("targetFound", () => { this.closeVisible = true; }); 
        this.closeTargetEl.addEventListener("targetLost",  () => { this.closeVisible = false; }); 
 

        // Start camera on click (user gesture) 
        this.startBtn.addEventListener("click", async () => { 
          if (!this.arSystem) return; 
 

          try { 
            this.startBtn.disabled = true; 
            this.statusEl.textContent = "Εκκίνηση κάμερας… δώσε άδεια (Allow)"; 
 

            await this.arSystem.start(); 
 

            this.statusEl.textContent = "Σάρωση… βάλε &lt;/i&gt; αριστερά και &lt;i&gt; δεξιά"; 
          } catch (e) { 
            console.error(e); 
            this.statusEl.textContent = "Σφάλμα κάμερας/AR — έλεγξε permissions ή ότι είσαι σε localhost."; 
            this.startBtn.disabled = false; 
          } 
        }); 
 

        // αρχική κατάσταση UI 
        this.codeEl.textContent = "Hello World!"; 
      }, 
 

      tick: function () { 
        if (!this.openTargetEl || !this.closeTargetEl) return; 
 

        // Θέση στο world space (A-Frame exposes THREE globally) 
        const openPos = new THREE.Vector3(); 
        const closePos = new THREE.Vector3(); 
 

        this.openTargetEl.object3D.getWorldPosition(openPos); 
        this.closeTargetEl.object3D.getWorldPosition(closePos); 
 

        // “δεξιά/αριστερά” με βάση τον x άξονα 
        const openRight = this.openVisible && (openPos.x > this.deadZone); 
        const closeLeft = this.closeVisible && (closePos.x < -this.deadZone); 
 

        // ενημέρωση πλευρών 
        this.rightStateEl.textContent = openRight ? "✅ Βρέθηκε <i> (δεξιά)" : "⏳ Περιμένω <i> (δεξιά)"; 
        this.leftStateEl.textContent  = closeLeft ? "✅ Βρέθηκε </i> (αριστερά)" : "⏳ Περιμένω </i> (αριστερά)"; 
 

        // κανόνας: σωστό μόνο όταν ισχύουν και τα δύο 
        if (openRight && closeLeft) { 
          this.helloEl.classList.add("italic"); 
          this.statusEl.textContent = "✅ Σωστή δομή: <i>Hello World!</i>"; 
          this.codeEl.textContent = "<i>Hello World!</i>"; 
        } else { 
          this.helloEl.classList.remove("italic"); 
          this.codeEl.textContent = "Hello World!"; 
 

          if (!this.openVisible && !this.closeVisible) { 
            this.statusEl.textContent = "Σάρωση… βάλε </i> αριστερά και <i> δεξιά"; 
          } else if (this.openVisible && !openRight) { 
            this.statusEl.textContent = "Μετακίνησε την κάρτα <i> προς τα ΔΕΞΙΑ στο κάδρο"; 
          } else if (this.closeVisible && !closeLeft) { 
            this.statusEl.textContent = "Μετακίνησε την κάρτα </i> προς τα ΑΡΙΣΤΕΡΑ στο κάδρο"; 
          } else { 
            this.statusEl.textContent = "Χρειάζονται και οι 2 κάρτες στη σωστή πλευρά"; 
          } 
        } 
      } 
    }); 
  </script> 
</head> 
 

<body> 
  <!-- UI Overlay --> 
  <div id="ui"> 
    <div id="topbar"> 
      <div class="pill"><strong>Tag‑It‑AR</strong> • Desktop Demo</div> 
      <div class="pill" id="statusPill">Πάτα “Start Camera” για να ξεκινήσεις</div> 
      <button id="startBtn" disabled>Start Camera</button> 
    </div> 
 

    <div id="main"> 
      <!-- LEFT: closing tag --> 
      <div class="panel"> 
        <div class="label">Αριστερά (Closing tag)</div> 
        <div class="expect">&lt;/i&gt;</div> 
        <div class="state" id="leftState">⏳ Περιμένω </i> (αριστερά)</div> 
      </div> 
 

      <!-- CENTER: hello --> 
      <div id="centerBox"> 
        <p id="hello">Hello World!</p> 
        <div id="codeTitle">HTML Preview</div> 
        <div id="codePreview">Hello World!</div> 
      </div> 
 

      <!-- RIGHT: opening tag --> 
      <div class="panel"> 
        <div class="label">Δεξιά (Opening tag)</div> 
        <div class="expect">&lt;i&gt;</div> 
        <div class="state" id="rightState">⏳ Περιμένω <i> (δεξιά)</div> 
      </div> 
    </div> 
 

    <div id="footer"> 
      <div class="hint"> 
        Βάλε την κάρτα <strong>&lt;/i&gt;</strong> στο αριστερό μέρος του κάδρου και την κάρτα <strong>&lt;i&gt;</strong> στο δεξί. 
        Όταν είναι σωστά, το “Hello World!” γίνεται πλάγιο και ο κώδικας γίνεται <strong>&lt;i&gt;Hello World!&lt;/i&gt;</strong>. 
      </div> 
    </div> 
  </div> 
 

  <!-- AR Scene (MindAR) --> 
  <a-scene 
    mindar-image="imageTargetSrc: ./targets.mind; autoStart: false;" 
    embedded 
    vr-mode-ui="enabled: false" 
    device-orientation-permission-ui="enabled: false" 
    renderer="colorManagement: true, physicallyCorrectLights" 
    desktop-open-close-rule 
  > 
    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera> 
 

    <!-- 
      IMPORTANT: 
      - targetIndex: 0 αντιστοιχεί στον 1ο στόχο που έβαλες στον compiler 
      - targetIndex: 1 στον 2ο 
      Αν έχεις ανάποδα τη σειρά, απλά αντάλλαξε τα indices εδώ. 
      Το pattern targetIndex/targets.mind είναι το standard του MindAR. [1](https://hiukim.github.io/mind-ar-js-doc/quick-start/webpage/) 
    --> 
 

    <!-- OPEN: <i> --> 
    <a-entity id="openTarget" mindar-image-target="targetIndex: 0"></a-entity> 
 

    <!-- CLOSE: </i> --> 
    <a-entity id="closeTarget" mindar-image-target="targetIndex: 1"></a-entity> 
  </a-scene> 
</body> 
</html> 
 
